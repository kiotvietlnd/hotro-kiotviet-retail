<!DOCTYPE html><html lang="vi"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Năng Hóa Đơn Điện Tử trên KiotViet (Ngành Retail)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f9fafb; color: #111827; scroll-behavior: smooth; }
        .toc-link.active { color: #2563eb; border-left-color: #2563eb; font-weight: 600; }
        .main-nav-link.active, .sub-nav-link.active { background-color: #dbeafe; /* Tailwind blue-100 */ color: #1d4ed8; /* Tailwind blue-700 */ font-weight: 600; }
        .main-nav-link.active i, .sub-nav-link.active i { color: #1d4ed8; /* Tailwind blue-700 */ }
        #sidebar .submenu { transition: max-height 0.3s ease-in-out; max-height: 0; overflow: hidden; }
        #sidebar .submenu.open { max-height: 1500px; }
        .arrow-icon { transition: transform 0.3s ease-in-out; }
        .arrow-icon.open { transform: rotate(90deg); }
        /* Style for standard prose lists to ensure bullet points are dots */
        .prose ul { list-style-type: disc; }
        .prose ul, .prose ol { padding-left: 1.25rem; }
        .prose ul > li, .prose ol > li { margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .prose ul > li::marker { color: #111827; }
    </style></head><body class="bg-gray-50">
    <div id="app-wrapper">
        <header class="bg-white sticky top-0 z-40 border-b border-gray-200">
            <!-- HEADER CONTENT (STATIC) -->
            <nav class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <button id="mobile-menu-button" class="lg:hidden mr-4 p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        </button>
                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/"><img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8"></a>
                    </div>
                    <div class="flex items-center flex-1 justify-end space-x-4">
                           <div class="relative hidden sm:block w-full max-w-lg">
                             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                 <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                     <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                 </svg>
                             </div>
                             <input class="block w-full bg-white border border-gray-300 rounded-full py-2 pl-10 pr-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" placeholder="Chúng tôi có thể giúp bạn như thế nào?" type="search" name="q">
                         </div>
                           <a href="#" class="hidden sm:block text-sm font-medium text-blue-600 bg-white border border-gray-300 hover:bg-gray-50 px-4 py-2 rounded-full whitespace-nowrap">Đăng nhập</a>
                           <a href="#" class="hidden sm:block text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full whitespace-nowrap">Đăng ký</a>
                    </div>
                </div>
            </nav>
        </header>
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-12 gap-8">
                <aside id="sidebar" class="fixed top-0 left-0 h-full w-72 bg-white border-r border-gray-200 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 lg:block lg:col-span-3 lg:h-auto lg:w-auto lg:bg-transparent lg:border-none lg:z-auto">
                    <!-- FULL, STATIC LEFT SIDEBAR. DYNAMIC HIGHLIGHTS WILL BE ADDED HERE. -->
                    <div class="p-4 border-b border-gray-200 lg:hidden flex justify-between items-center">
                        <h2 class="font-bold text-lg">Menu</h2>
                        <button id="close-sidebar-button" class="p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                    </div>
                    <nav class="sticky top-24 space-y-1 p-4 lg:p-0 lg:pr-4 overflow-y-auto h-[calc(100vh-64px)] lg:h-auto">
                        <!-- Làm quen KiotViet Retail -->
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Làm quen KiotViet Retail</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về 6 bước làm quen KiotViet Retail</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/dang-ky-su-dung" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-user-plus w-5 text-center mr-3 text-gray-500"></i>Đăng ký sử dụng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/them-hang-hoa" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-plus-circle w-5 text-center mr-3 text-gray-500"></i>Bước 1: Thêm hàng hóa</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/nhap-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-dolly w-5 text-center mr-3 text-gray-500"></i>Bước 2: Nhập hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/ban-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cash-register w-5 text-center mr-3 text-gray-500"></i>Bước 3: Bán hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/tra-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-undo w-5 text-center mr-3 text-gray-500"></i>Bước 4: Trả hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/cong-no" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-file-invoice-dollar w-5 text-center mr-3 text-gray-500"></i>Bước 5: Công nợ</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/bao-cao" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-pie w-5 text-center mr-3 text-gray-500"></i>Bước 6: Báo cáo</a>
                            </div>
                        </div>
                        <!-- Tối ưu Vận hành -->
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Tối ưu Vận hành</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp tối ưu vận hành</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tim-san-pham" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-search w-5 text-center mr-3 text-gray-500"></i>Tìm sản phẩm</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/ban-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cash-register w-5 text-center mr-3 text-gray-500"></i>Bán hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tra-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-undo w-5 text-center mr-3 text-gray-500"></i>Trả hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/dat-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cart-plus w-5 text-center mr-3 text-gray-500"></i>Đặt hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/thanh-toan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-credit-card w-5 text-center mr-3 text-gray-500"></i>Thanh toán</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/giao-van" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-truck w-5 text-center mr-3 text-gray-500"></i>Giao vận</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/hoa-don-dien-tu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md active"><i class="fa-solid fa-receipt w-5 text-center mr-3 text-gray-500"></i>Hóa đơn điện tử</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/thiet-bi-phan-cung" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-print w-5 text-center mr-3 text-gray-500"></i>Thiết bị phần cứng</a>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-industry w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Chuyên ngành</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/lo-hsd" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các ngành quản lý Lô-HSD</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/serial-imei" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các ngành quản lý Serial-IMEI</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/nha-thuoc" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Ngành Nhà thuốc</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/vat-lieu-xay-dung" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Ngành Vật liệu xây dựng</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Tối ưu Quản lý -->
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Tối ưu Quản lý</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp tối ưu quản lý</a>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-boxes-stacked w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Hàng hóa</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/thuat-ngu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các thuật ngữ về hàng hóa</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-hoa-thuong" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng hóa thường</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-dich-vu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng dịch vụ</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-combo" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng combo - đóng gói</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-san-xuat" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng sản xuất</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-lo-hsd" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng Lô - HSD</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-serial-imei" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng Serial - IMEI</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/kiem-kho" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Kiểm kho</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/xuat-huy" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Xuất hủy</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/chuyen-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Chuyển hàng</a>
                                    </div>
                                </div>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-truck-loading w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Giao dịch với NCC</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/quan-ly-don-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-clipboard-list w-5 text-center mr-3 text-gray-500"></i>Quản lý đơn hàng</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/nhap-hang" class="sub-nav-link group flex items-center px-3 py-2 text-sm font-medium rounded-md"><i class="fa-solid fa-dolly w-5 text-center mr-3"></i>Nhập hàng</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/dat-hang-nhap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-file-invoice w-5 text-center mr-3 text-gray-500"></i>Đặt hàng nhập</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/tra-hang-nhap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-arrow-left-long w-5 text-center mr-3 text-gray-500"></i>Trả hàng nhập</a>
                                    </div>
                                </div>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/nha-cung-cap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-user-tie w-5 text-center mr-3 text-gray-500"></i>Nhà cung cấp</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/khach-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-users w-5 text-center mr-3 text-gray-500"></i>Khách hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/nhan-vien" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-user-gear w-5 text-center mr-3 text-gray-500"></i>Nhân viên</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/so-quy" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book w-5 text-center mr-3 text-gray-500"></i>Sổ quỹ</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/bao-cao" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-pie w-5 text-center mr-3 text-gray-500"></i>Báo cáo</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/thiet-lap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cog w-5 text-center mr-3 text-gray-500"></i>Thiết lập</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/ket-noi-api" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-plug w-5 text-center mr-3 text-gray-500"></i>Kết nối API</a>
                            </div>
                        </div>
                        <!-- Thúc đẩy Doanh thu -->
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Thúc đẩy Doanh thu</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp thúc đẩy doanh thu</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/kiotviet-web" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-store-alt w-5 text-center mr-3 text-gray-500"></i>KiotViet Web</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/san-thuong-mai-dien-tu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-shopping-basket w-5 text-center mr-3 text-gray-500"></i>Sàn TMĐT</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/mang-xa-hoi" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-share-alt w-5 text-center mr-3 text-gray-500"></i>Mạng xã hội</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/phan-tich" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-line w-5 text-center mr-3 text-gray-500"></i>Phân tích</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/khuyen-mai" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-tags w-5 text-center mr-3 text-gray-500"></i>Khuyến mại</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/vouchers" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-ticket-alt w-5 text-center mr-3 text-gray-500"></i>Vouchers</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/coupons" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-star w-5 text-center mr-3 text-gray-500"></i>Coupons</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/tich-diem" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-gift w-5 text-center mr-3 text-gray-500"></i>Tích điểm</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/zalo-zns" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-comment-dots w-5 text-center mr-3 text-gray-500"></i>Zalo ZNS</a>
                            </div>
                        </div>
                    </nav>
                </aside>
                <main class="col-span-12 lg:col-span-6 bg-white border border-gray-200 rounded-lg p-8">
                    <!-- BREADCRUMBS (DYNAMIC) -->
                    <div class="text-sm text-gray-500 mb-4">
                        <a href="#" class="hover:underline">Tối ưu Vận hành</a> &gt; <span class="text-gray-700">Hóa đơn điện tử</span>
                    </div>
                    <!-- TITLE (DYNAMIC) -->
                    <h1 class="text-3xl font-extrabold tracking-tight text-gray-900">
                        Tính Năng Hóa Đơn Điện Tử trên KiotViet (Ngành Retail)
                    </h1>
                    <!-- ARTICLE CONTENT (DYNAMIC) -->
                    <article class="prose max-w-none mt-8 text-gray-900">
                        <section id="gioi-thieu-chung" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">I. Giới thiệu chung</h3>
                            <p>Tính năng Hóa đơn điện tử trên KiotViet là một giải pháp toàn diện, tích hợp sẵn các công cụ như Quản lý Thuế (VAT) và Chữ ký số, giúp các cửa hàng và doanh nghiệp thực hiện nghiệp vụ tài chính – kế toán một cách chính xác, an toàn và tuân thủ pháp luật.</p>
                            <p class="mt-4"><strong>Lợi ích nổi bật của tính năng:</strong></p>
                            <ul>
                                <li><strong>Đảm bảo tuân thủ pháp luật:</strong> Giúp chủ cửa hàng và kế toán đảm bảo các giao dịch, hóa đơn và báo cáo thuế luôn tuân thủ đúng quy định hiện hành của Cơ quan Thuế.</li>
                                <li><strong>Tiết kiệm chi phí vận hành:</strong> Giảm thiểu chi phí in ấn, vận chuyển và lưu trữ hóa đơn so với phương pháp sử dụng hóa đơn giấy truyền thống.</li>
                                <li><strong>Tăng cường độ chính xác và bảo mật:</strong> Hạn chế tối đa sai sót do nhập liệu thủ công, đồng thời bảo vệ dữ liệu bằng công nghệ mã hóa và chữ ký số an toàn.</li>
                                <li><strong>Quản lý tập trung và hiệu quả:</strong> Hỗ trợ quản lý dễ dàng phát hành, tìm kiếm, tra cứu và lưu trữ hóa đơn điện tử ngay trên phần mềm KiotViet.</li>
                            </ul>
                        </section>
                        <section id="huong-dan-cac-thao-tac-co-ban" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">II. Hướng Dẫn Các Thao Tác Cơ Bản</h3>
                            <p>Để triển khai và sử dụng tính năng Hóa đơn điện tử, luồng thao tác chính của bạn sẽ bao gồm: thiết lập các tính năng liên quan, đăng ký chữ ký số và đăng ký sử dụng hóa đơn với Cơ quan Thuế, sau đó là các nghiệp vụ áp dụng thuế và phát hành hóa đơn hằng ngày.</p>
                            <div class="toc-item mt-6">
                                <h4 id="kich-hoat-tinh-nang-thue-va-hoa-don-dien-tu" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">1. Kích hoạt tính năng Thuế và Hóa đơn điện tử</h4>
                                <p>Trước khi có thể sử dụng, bạn cần kích hoạt các thiết lập cần thiết trên KiotViet để hệ thống sẵn sàng cho các nghiệp vụ liên quan đến thuế và hóa đơn.</p>
                                <p class="mt-4"><strong>Thao tác trên KiotViet:</strong></p>
                                <ul>
                                    <li>Tại màn hình Quản lý, bạn vào menu <strong>Thiết lập -&gt; Thiết lập cửa hàng</strong>.</li>
                                    <li>Trong khối <strong>Thiết lập quản lý</strong>, chọn mục <strong>Giao dịch</strong>.</li>
                                    <li>Tại đây, bạn cần gạt nút sang màu xanh để kích hoạt 2 tính năng:</li>
                                    <li><strong>Thuế VAT:</strong> Để hệ thống có thể tính toán và áp dụng thuế trên các giao dịch mua bán, nhập hàng.</li>
                                    <li><strong>Kết nối hóa đơn điện tử:</strong> Để liên kết KiotViet với nhà cung cấp dịch vụ Hóa đơn điện tử.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="dang-ky-chu-ky-so-va-dang-ky-su-dung-hddt" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">2. Đăng ký Chữ ký số và Đăng ký sử dụng HĐĐT</h4>
                                <p>Để có thể nộp tờ khai và ký phát hành hóa đơn điện tử hợp lệ, bạn bắt buộc phải có chữ ký số và được Cơ quan Thuế chấp nhận đăng ký sử dụng HĐĐT.</p>
                                <p class="mt-4"><strong>Thao tác trên KiotViet:</strong></p>
                                <ul>
                                    <li><strong>Đăng ký Chữ ký số:</strong> Sau khi kích hoạt kết nối HĐĐT, hệ thống sẽ điều hướng bạn đến màn hình Khai báo thông tin Chứng thư chữ ký số.</li>
                                    <li>Bạn cần điền đầy đủ, chính xác thông tin doanh nghiệp/hộ kinh doanh và người đại diện theo giấy phép kinh doanh.</li>
                                    <li>Tải lên các hồ sơ cần thiết theo yêu cầu.</li>
                                    <li>Thực hiện xác thực danh tính trực tuyến (eKYC) bằng cách chụp ảnh giấy tờ tùy thân và xác thực khuôn mặt theo hướng dẫn.</li>
                                    <li><strong>Đăng ký sử dụng HĐĐT với Cơ quan Thuế:</strong> Thao tác này được thực hiện trên phần mềm KiotViet Hóa đơn điện tử.</li>
                                    <li>Bạn vào mục <strong>Đăng ký sử dụng -&gt; Đăng ký SD hóa đơn</strong>.</li>
                                    <li>Kiểm tra và hoàn thiện các nội dung trên tờ khai đăng ký.</li>
                                    <li>Sử dụng chữ ký số vừa đăng ký để ký và nộp tờ khai.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="ap-dung-thue-vat-trong-giao-dich" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">3. Áp dụng Thuế VAT trong giao dịch</h4>
                                <p>Để đảm bảo các giao dịch hằng ngày được ghi nhận thuế chính xác, bạn cần áp dụng thuế VAT khi tạo hóa đơn bán hàng hoặc phiếu nhập hàng.</p>
                                <p class="mt-4"><strong>Thao tác trên KiotViet:</strong></p>
                                <ul>
                                    <li>Bạn có thể thiết lập mức thuế VAT mặc định cho từng sản phẩm trong màn hình <strong>Hàng hóa -&gt; Danh mục</strong>.</li>
                                    <li>Khi tạo hóa đơn bán hàng hoặc phiếu nhập hàng, bạn chỉ cần bật chức năng <strong>Thuế VAT</strong>. Hệ thống sẽ tự động tính toán tổng tiền thuế dựa trên các sản phẩm có trong giao dịch.</li>
                                    <li><strong>Lưu ý:</strong> Nếu hóa đơn có giảm giá, hệ thống sẽ phân bổ giảm giá trước rồi mới tính thuế. Đối với các giao dịch trả hàng, KiotViet cũng hỗ trợ chức năng Hoàn trả VAT tương ứng.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="phat-hanh-va-tra-cuu-hoa-don-dien-tu" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">4. Phát hành và Tra cứu Hóa đơn điện tử</h4>
                                <p>Sau khi khách hàng thanh toán, bạn có thể phát hành HĐĐT cho giao dịch đó và tra cứu lại khi cần.</p>
                                <p class="mt-4"><strong>Thao tác trên KiotViet:</strong></p>
                                <ul>
                                    <li><strong>Phát hành HĐĐT:</strong></li>
                                    <li><strong>Tự động:</strong> Bạn có thể vào phần thiết lập và bật tùy chọn "Cho phép phát hành hóa đơn điện tử ngay trên màn hình bán hàng". Khi đó, hóa đơn sẽ được phát hành ngay sau khi thanh toán.</li>
                                    <li><strong>Thủ công (hàng loạt):</strong> Tại màn hình <strong>Giao dịch -&gt; Hóa đơn</strong>, bạn có thể tích chọn nhiều hóa đơn, sau đó vào menu thao tác và chọn <strong>Chuyển hóa đơn điện tử</strong> để gửi yêu cầu phát hành.</li>
                                    <li><strong>Tra cứu HĐĐT:</strong></li>
                                    <li>Trên danh sách hóa đơn, cột <strong>Trạng thái HĐĐT</strong> sẽ hiển thị tình trạng như "Đã phát hành", "Phát hành lỗi"...</li>
                                    <li>Khi xem chi tiết một hóa đơn, bạn có thể xem bản thể hiện của HĐĐT hoặc lấy mã tra cứu để gửi cho khách hàng.</li>
                                </ul>
                            </div>
                        </section>
                        <section id="cac-tinh-nang-nang-cao" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">III. Các Tính Năng Nâng Cao</h3>
                            <div class="toc-item mt-6">
                                <h4 id="cap-nhat-thue-vat-hang-loat" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">1. Cập nhật Thuế VAT hàng loạt</h4>
                                <p>Khi có sự thay đổi về chính sách thuế, bạn có thể sử dụng tính năng này để cập nhật lại mức thuế cho một lượng lớn hàng hóa một cách nhanh chóng.</p>
                                <p class="mt-4"><strong>Các bước thực hiện:</strong></p>
                                <ul>
                                    <li>Tại màn hình <strong>Hàng hóa → Danh mục</strong>, bạn tích chọn các sản phẩm cần cập nhật.</li>
                                    <li>Nhấn vào menu <strong>Thao tác → chọn Thay đổi mức thuế VAT</strong>.</li>
                                    <li>Nhập mức thuế mới và xác nhận để hệ thống áp dụng cho tất cả hàng hóa đã chọn.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="quan-ly-hddt-co-thu-khac-chua-vat" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">2. Quản lý HĐĐT có Thu khác chứa VAT</h4>
                                <p>Tính năng này giúp bạn xử lý các trường hợp hóa đơn có những khoản thu khác (ví dụ: phí dịch vụ) đã bao gồm sẵn tiền thuế VAT.</p>
                                <p class="mt-4"><strong>Các bước thực hiện:</strong></p>
                                <ul>
                                    <li>Khi bạn tạo một khoản thu khác và tên của khoản thu đó có chứa từ khóa "VAT", nếu bạn sử dụng mẫu hóa đơn giá trị gia tăng, hệ thống sẽ tự động ghi nhận giá trị của khoản thu đó là tiền thuế khi phát hành hóa đơn.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="cap-nhat-thong-tin-chu-ky-so" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">3. Cập nhật thông tin Chữ ký số</h4>
                                <p>Trong trường hợp hồ sơ đăng ký chữ ký số có sai sót và bị từ chối, bạn có thể chỉnh sửa lại thông tin để đăng ký lại.</p>
                                <p class="mt-4"><strong>Các bước thực hiện:</strong></p>
                                <ul>
                                    <li>Hệ thống cho phép bạn chỉnh sửa lại thông tin đăng ký nếu chứng thư số đang ở các trạng thái "Lưu tạm", "eKYC Không thành công", hoặc "Từ chối". Bạn chỉ cần truy cập lại màn hình đăng ký và cập nhật thông tin chính xác.</li>
                                </ul>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="xem-bao-cao-thue-va-hoa-don" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">4. Xem báo cáo Thuế và Hóa đơn</h4>
                                <p>Để phục vụ công tác kế toán và kê khai thuế cuối kỳ, bạn có thể truy xuất các báo cáo liên quan đến thuế và hóa đơn ngay trên KiotViet.</p>
                                <p class="mt-4"><strong>Các bước thực hiện:</strong></p>
                                <ul>
                                    <li><strong>Báo cáo cuối ngày:</strong> Trong <strong>Báo cáo -&gt; Cuối ngày</strong>, hệ thống sẽ hiển thị thêm cột VAT để bạn theo dõi tổng số thuế phát sinh trong ngày.</li>
                                    <li><strong>Bảng kê hàng hóa, dịch vụ bán ra:</strong> KiotViet cung cấp mẫu báo cáo này để hỗ trợ việc kê khai thuế GTGT, thống kê chi tiết từng hóa đơn theo từng mức thuế suất.</li>
                                </ul>
                            </div>
                        </section>
                        <section class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">Thông Tin Hỗ Trợ</h3>
                            <ul>
                                <li><strong>Tổng đài tư vấn bán hàng:</strong> 1800 6162</li>
                                <li><strong>Tổng đài hỗ trợ phần mềm:</strong> 1900 6522</li>
                                <li><strong>Email hỗ trợ:</strong> hotro@kiotviet.com</li>
                            </ul>
                        </section>
                    </article>
                </main>
                <aside class="hidden lg:block lg:col-span-3">
                    <nav id="toc-nav" class="sticky top-24">
                        <h3 class="font-semibold text-gray-900 mb-3">Trong bài viết này</h3>
                        <!-- RIGHT SIDEBAR ToC (DYNAMIC) -->
                        <div class="space-y-1">
                            <div><a href="#gioi-thieu-chung" class="toc-link toc-parent-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">I.&nbsp;Giới thiệu chung</a></div>
                            <div>
                                <a href="#huong-dan-cac-thao-tac-co-ban" class="toc-link toc-parent-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">II.&nbsp;Hướng Dẫn Các Thao Tác Cơ Bản</a>
                                <div class="space-y-1 mt-1 pl-4 toc-submenu">
                                    <a href="#kich-hoat-tinh-nang-thue-va-hoa-don-dien-tu" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">1.&nbsp;Kích hoạt tính năng Thuế và Hóa đơn điện tử</a>
                                    <a href="#dang-ky-chu-ky-so-va-dang-ky-su-dung-hddt" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">2.&nbsp;Đăng ký Chữ ký số và Đăng ký sử dụng HĐĐT</a>
                                    <a href="#ap-dung-thue-vat-trong-giao-dich" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">3.&nbsp;Áp dụng Thuế VAT trong giao dịch</a>
                                    <a href="#phat-hanh-va-tra-cuu-hoa-don-dien-tu" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">4.&nbsp;Phát hành và Tra cứu Hóa đơn điện tử</a>
                                </div>
                            </div>
                            <div>
                                <a href="#cac-tinh-nang-nang-cao" class="toc-link toc-parent-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">III.&nbsp;Các Tính Năng Nâng Cao</a>
                                <div class="space-y-1 mt-1 pl-4 toc-submenu">
                                    <a href="#cap-nhat-thue-vat-hang-loat" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">1.&nbsp;Cập nhật Thuế VAT hàng loạt</a>
                                    <a href="#quan-ly-hddt-co-thu-khac-chua-vat" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">2.&nbsp;Quản lý HĐĐT có Thu khác chứa VAT</a>
                                    <a href="#cap-nhat-thong-tin-chu-ky-so" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">3.&nbsp;Cập nhật thông tin Chữ ký số</a>
                                    <a href="#xem-bao-cao-thue-va-hoa-don" class="toc-link block border-l-2 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">4.&nbsp;Xem báo cáo Thuế và Hóa đơn</a>
                                </div>
                            </div>
                        </div>
                    </nav>
                </aside>
            </div>
        </div>
        <footer class="bg-white border-t border-gray-200 mt-12">
            <!-- FOOTER CONTENT (STATIC) -->
            <div class="max-w-screen-2xl mx-auto py-6 px-4 sm:px-6 lg:px-8"><p class="text-center text-sm text-gray-500">&copy; 2025 KiotViet. All rights reserved.</p></div>
        </footer>
    </div>
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
    <button id="scrollToTopBtn" class="hidden fixed bottom-5 right-5 z-50 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-opacity duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>
    </button>
    <script>
        // SCRIPT CONTENT (STATIC)
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const closeSidebarButton = document.getElementById('close-sidebar-button');
            const openSidebar = () => { sidebar.classList.remove('-translate-x-full'); overlay.classList.remove('hidden'); };
            const closeSidebar = () => { sidebar.classList.add('-translate-x-full'); overlay.classList.add('hidden'); };
            if (mobileMenuButton) mobileMenuButton.addEventListener('click', openSidebar);
            if(closeSidebarButton) closeSidebarButton.addEventListener('click', closeSidebar);
            if(overlay) overlay.addEventListener('click', closeSidebar);
            document.querySelectorAll('#sidebar .main-nav-toggle').forEach(button => {
                button.addEventListener('click', (e) => {
                    const submenu = button.nextElementSibling;
                    if (submenu && submenu.classList.contains('submenu')) {
                        submenu.classList.toggle('open');
                        const arrow = button.querySelector('.arrow-icon');
                        if (arrow) { arrow.classList.toggle('open'); }
                    }
                });
            });
            const activeLink = document.querySelector('#sidebar .active');
            if (activeLink) {
                let parent = activeLink.closest('.submenu');
                while(parent) {
                    parent.classList.add('open');
                    const prevButton = parent.previousElementSibling;
                    if (prevButton && prevButton.classList.contains('main-nav-toggle')) {
                        const arrow = prevButton.querySelector('.arrow-icon');
                        if (arrow) { arrow.classList.add('open'); }
                    }
                    parent = parent.parentElement.closest('.submenu');
                }
            }
            const sections = document.querySelectorAll('main section, main .toc-item');
            const navLinks = document.querySelectorAll('#toc-nav a.toc-link');
            const headerOffset = 120;
            const activateLink = (id) => {
                let activeParent = null;
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                        const parentTocItem = link.closest('.toc-submenu');
                        if(parentTocItem){ activeParent = parentTocItem.previousElementSibling; }
                    }
                });
                if (activeParent && activeParent.classList.contains('toc-parent-link')) { activeParent.classList.add('active'); }
            };
            const onScroll = () => {
                if (window.innerWidth < 1024) return;
                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - headerOffset;
                    if (window.pageYOffset >= sectionTop) { currentSectionId = section.id || section.querySelector('h4')?.id; }
                });
                if (currentSectionId) { activateLink(currentSectionId); } 
                else if (window.scrollY === 0 && navLinks.length > 0) {
                    navLinks.forEach(link => link.classList.remove('active'));
                    const firstLink = document.querySelector('#toc-nav a.toc-parent-link');
                    if (firstLink) firstLink.classList.add('active');
                }
            };
            window.addEventListener('scroll', onScroll, { passive: true });
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - (headerOffset - 20);
                        window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                    }
                });
            });
            onScroll();
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            if (scrollToTopBtn) {
                window.addEventListener('scroll', () => { if (window.scrollY > 300) { scrollToTopBtn.classList.remove('hidden'); } else { scrollToTopBtn.classList.add('hidden'); } });
                scrollToTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
            }
        });
    </script></body></html>

