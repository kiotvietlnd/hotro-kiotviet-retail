<!DOCTYPE html><html lang="vi"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tổng Quan và Hướng Dẫn Sử Dụng Tính Năng Coupon (Phiếu giảm giá) trên KiotViet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f9fafb; color: #111827; scroll-behavior: smooth; }
        .toc-link.active { color: #2563eb; border-left-color: #2563eb; font-weight: 600; }
        .main-nav-link.active, .sub-nav-link.active { background-color: #dbeafe; /* Tailwind blue-100 */ color: #1d4ed8; /* Tailwind blue-700 */ font-weight: 600; }
        .main-nav-link.active i, .sub-nav-link.active i { color: #1d4ed8; /* Tailwind blue-700 */ }
        #sidebar .submenu { transition: max-height 0.3s ease-in-out; max-height: 0; overflow: hidden; }
        #sidebar .submenu.open { max-height: 1500px; }
        .arrow-icon { transition: transform 0.3s ease-in-out; }
        .arrow-icon.open { transform: rotate(90deg); }
        /* Style for standard prose lists */
        .prose ul, .prose ol { padding-left: 1.25rem; }
        .prose ul > li, .prose ol > li { margin-top: 0.5rem; margin-bottom: 0.5rem; }
    </style></head><body class="bg-gray-50">
    <div id="app-wrapper">
        <header class="bg-white sticky top-0 z-40 border-b border-gray-200">
            <nav class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <button id="mobile-menu-button" class="lg:hidden mr-4 p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        </button>
                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/"><img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8"></a>
                    </div>
                    <div class="flex items-center flex-1 justify-end space-x-4">
                           <div class="relative hidden sm:block w-full max-w-lg">
                             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                 <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                     <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                 </svg>
                             </div>
                             <input class="block w-full bg-white border border-gray-300 rounded-full py-2 pl-10 pr-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" placeholder="Chúng tôi có thể giúp bạn như thế nào?" type="search" name="q">
                         </div>
                           <a href="#" class="hidden sm:block text-sm font-medium text-blue-600 bg-white border border-gray-300 hover:bg-gray-50 px-4 py-2 rounded-full whitespace-nowrap">Đăng nhập</a>
                           <a href="#" class="hidden sm:block text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full whitespace-nowrap">Đăng ký</a>
                    </div>
                </div>
            </nav>
        </header>
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-12 gap-8">
                <aside id="sidebar" class="fixed top-0 left-0 h-full w-72 bg-white border-r border-gray-200 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 lg:block lg:col-span-3 lg:h-auto lg:w-auto lg:bg-transparent lg:border-none lg:z-auto">
                    <div class="p-4 border-b border-gray-200 lg:hidden flex justify-between items-center">
                        <h2 class="font-bold text-lg">Menu</h2>
                        <button id="close-sidebar-button" class="p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                    </div>
                    <nav class="sticky top-24 space-y-1 p-4 lg:p-0 lg:pr-4 overflow-y-auto h-[calc(100vh-64px)] lg:h-auto">
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Làm quen KiotViet Retail</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về 6 bước làm quen KiotViet Retail</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/them-hang-hoa" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-plus-circle w-5 text-center mr-3 text-gray-500"></i>Bước 1: Thêm hàng hóa</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/nhap-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-dolly w-5 text-center mr-3 text-gray-500"></i>Bước 2: Nhập hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/ban-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cash-register w-5 text-center mr-3 text-gray-500"></i>Bước 3: Bán hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/tra-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-undo w-5 text-center mr-3 text-gray-500"></i>Bước 4: Trả hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/cong-no" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-file-invoice-dollar w-5 text-center mr-3 text-gray-500"></i>Bước 5: Công nợ</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/lam-quen/bao-cao" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-pie w-5 text-center mr-3 text-gray-500"></i>Bước 6: Báo cáo</a>
                            </div>
                        </div>
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Tối ưu Vận hành</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp tối ưu vận hành</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tim-san-pham" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-search w-5 text-center mr-3 text-gray-500"></i>Tìm sản phẩm</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/ban-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cash-register w-5 text-center mr-3 text-gray-500"></i>Bán hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/tra-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-undo w-5 text-center mr-3 text-gray-500"></i>Trả hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/dat-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cart-plus w-5 text-center mr-3 text-gray-500"></i>Đặt hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/thanh-toan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-credit-card w-5 text-center mr-3 text-gray-500"></i>Thanh toán</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/giao-van" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-truck w-5 text-center mr-3 text-gray-500"></i>Giao vận</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/hoa-don-dien-tu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-receipt w-5 text-center mr-3 text-gray-500"></i>Hóa đơn điện tử</a>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-industry w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Chuyên ngành</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/lo-hsd" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các ngành quản lý Lô-HSD</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/serial-imei" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các ngành quản lý Serial-IMEI</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/nha-thuoc" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Ngành Nhà thuốc</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/van-hanh/chuyen-nganh/vat-lieu-xay-dung" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Ngành Vật liệu xây dựng</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Tối ưu Quản lý</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp tối ưu quản lý</a>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-boxes-stacked w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Hàng hóa</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/thuat-ngu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Các thuật ngữ về hàng hóa</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-hoa-thuong" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng hóa thường</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-dich-vu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng dịch vụ</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-combo" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng combo - đóng gói</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-san-xuat" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng sản xuất</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-lo-hsd" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng Lô - HSD</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/hang-serial-imei" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Hàng Serial - IMEI</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/kiem-kho" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Kiểm kho</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/xuat-huy" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Xuất hủy</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/hang-hoa/chuyen-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md">Chuyển hàng</a>
                                    </div>
                                </div>
                                <div>
                                    <button class="main-nav-toggle w-full flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md px-3 py-2 text-left group">
                                        <span class="flex items-center"><i class="fa-solid fa-truck-loading w-5 text-center mr-3 text-gray-500 group-hover:text-gray-700"></i>Giao dịch với NCC</span>
                                        <svg class="arrow-icon h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                    </button>
                                    <div class="submenu pl-6">
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/quan-ly-don-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-clipboard-list w-5 text-center mr-3 text-gray-500"></i>Quản lý đơn hàng</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/nhap-hang" class="sub-nav-link group flex items-center px-3 py-2 text-sm font-medium rounded-md"><i class="fa-solid fa-dolly w-5 text-center mr-3"></i>Nhập hàng</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/dat-hang-nhap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-file-invoice w-5 text-center mr-3 text-gray-500"></i>Đặt hàng nhập</a>
                                        <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/giao-dich-ncc/tra-hang-nhap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-arrow-left-long w-5 text-center mr-3 text-gray-500"></i>Trả hàng nhập</a>
                                    </div>
                                </div>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/nha-cung-cap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-user-tie w-5 text-center mr-3 text-gray-500"></i>Nhà cung cấp</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/khach-hang" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-users w-5 text-center mr-3 text-gray-500"></i>Khách hàng</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/nhan-vien" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-user-gear w-5 text-center mr-3 text-gray-500"></i>Nhân viên</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/so-quy" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book w-5 text-center mr-3 text-gray-500"></i>Sổ quỹ</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/bao-cao" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-pie w-5 text-center mr-3 text-gray-500"></i>Báo cáo</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/quan-ly/thiet-lap" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-cog w-5 text-center mr-3 text-gray-500"></i>Thiết lập</a>
                            </div>
                        </div>
                        <div>
                            <button class="main-nav-toggle w-full flex items-center justify-between px-3 py-2 text-left mt-4">
                                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Thúc đẩy Doanh thu</h3>
                                <svg class="arrow-icon h-4 w-4 text-gray-500 open" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                            <div class="submenu pl-3 open">
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/tong-quan" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-book-open w-5 text-center mr-3 text-gray-500"></i>Về các giải pháp thúc đẩy doanh thu</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/kiotviet-web" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-store-alt w-5 text-center mr-3 text-gray-500"></i>KiotViet Web</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/san-thuong-mai-dien-tu" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-shopping-basket w-5 text-center mr-3 text-gray-500"></i>Sàn TMĐT</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/mang-xa-hoi" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-share-alt w-5 text-center mr-3 text-gray-500"></i>Mạng xã hội</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/phan-tich" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-chart-line w-5 text-center mr-3 text-gray-500"></i>Phân tích</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/khuyen-mai" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-tags w-5 text-center mr-3 text-gray-500"></i>Khuyến mại</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/vouchers" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-ticket-alt w-5 text-center mr-3 text-gray-500"></i>Vouchers</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/coupons" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md active"><i class="fa-solid fa-star w-5 text-center mr-3 text-gray-500"></i>Coupons</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/tich-diem" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-gift w-5 text-center mr-3 text-gray-500"></i>Tích điểm</a>
                                <a href="https://kiotvietlnd.github.io/hotro-kiotviet-retail/doanh-thu/zalo-zns" class="main-nav-link group flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md"><i class="fa-solid fa-comment-dots w-5 text-center mr-3 text-gray-500"></i>Zalo ZNS</a>
                            </div>
                        </div>
                    </nav>
                </aside>
                <main class="col-span-12 lg:col-span-6 bg-white border border-gray-200 rounded-lg p-8">
                    <div class="text-sm text-gray-500 mb-4">
                        <a href="#" class="hover:underline">Thúc đẩy Doanh thu</a> &gt; <span class="text-gray-700">Coupons</span>
                    </div>
                    <h1 class="text-3xl font-extrabold tracking-tight text-gray-900">
                        Tổng Quan và Hướng Dẫn Sử Dụng Tính Năng Coupon (Phiếu giảm giá) trên KiotViet
                    </h1>
                    <article class="prose max-w-none mt-8 text-gray-700">
                        <section id="gioi-thieu-chung" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">I. Giới thiệu chung</h3>
                            <p>Coupon (Phiếu giảm giá) là một công cụ marketing hiệu quả được tích hợp trên KiotViet, cho phép các chủ cửa hàng tạo và quản lý các chương trình giảm giá thông qua mã phiếu, áp dụng trực tiếp trên hóa đơn bán hàng.</p>
                            <p class="mt-4"><strong>Mục đích và giá trị của tính năng:</strong> Tính năng này giúp cửa hàng quản lý chặt chẽ các đợt phát hành coupon, theo dõi lịch sử sử dụng, và thiết lập các điều kiện áp dụng linh hoạt. Điều này không chỉ giúp thu hút khách hàng mới mà còn tăng cường sự gắn kết với khách hàng thân thiết.</p>
                            <p class="mt-4"><strong>Lợi ích chính:</strong></p>
                            <div class="flex items-start mt-4">
                                <span class="flex-shrink-0 w-6 text-center"><i class="fa-solid fa-check-circle text-blue-500 mt-1"></i></span>
                                <p><strong>Quản lý tập trung:</strong> Dễ dàng tạo, phát hành, hủy và theo dõi trạng thái của từng mã coupon trong mỗi đợt phát hành.</p>
                            </div>
                            <div class="flex items-start mt-4">
                                <span class="flex-shrink-0 w-6 text-center"><i class="fa-solid fa-check-circle text-blue-500 mt-1"></i></span>
                                <p><strong>Kiểm soát giao dịch:</strong> Quản lý chặt chẽ các giao dịch có sử dụng coupon, bao gồm bán hàng, trả hàng và đổi trả.</p>
                            </div>
                            <div class="flex items-start mt-4">
                                <span class="flex-shrink-0 w-6 text-center"><i class="fa-solid fa-check-circle text-blue-500 mt-1"></i></span>
                                <p><strong>Phân tích hiệu quả:</strong> Dữ liệu về coupon được ghi nhận trên các báo cáo bán hàng, giúp chủ cửa hàng đo lường hiệu quả của chương trình marketing.</p>
                            </div>
                            <div class="flex items-start mt-4">
                                <span class="flex-shrink-0 w-6 text-center"><i class="fa-solid fa-check-circle text-blue-500 mt-1"></i></span>
                                <p><strong>Thiết lập linh hoạt:</strong> Cho phép tùy chọn áp dụng coupon cùng với các chương trình khuyến mại khác.</p>
                            </div>
                            <p class="mt-4"><strong>Đối tượng phù hợp:</strong> Mọi cửa hàng bán lẻ sử dụng KiotViet muốn triển khai các chương trình khuyến mãi bằng phiếu giảm giá để kích thích mua sắm và tri ân khách hàng.</p>
                        </section>
                        <section id="cac-thao-tac-pho-bien" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">II. Các thao tác phổ biến</h3>
                            <p>Đây là những thao tác cơ bản và cần thiết để bạn bắt đầu triển khai chương trình Coupon cho cửa hàng của mình.</p>
                            <div class="toc-item mt-6">
                                <h4 id="kich-hoat-tinh-nang-coupon" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">1. Kích hoạt tính năng Coupon</h4>
                                <p><strong>Tình huống:</strong> Anh Hùng, chủ cửa hàng điện máy "Hùng Cường", muốn sử dụng phiếu giảm giá để thu hút khách hàng trong dịp cuối năm nhưng chưa bật tính năng này trên KiotViet.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ol class="list-decimal list-inside space-y-2 mt-2">
                                    <li>Trên màn hình Quản lý, anh Hùng vào <strong>Thiết lập -> Thiết lập cửa hàng</strong>.</li>
                                    <li>Tìm đến khối <strong>Thiết lập quản lý</strong>, chọn mục <strong>Giao dịch</strong>.</li>
                                    <li>Gạt nút để bật tính năng <strong>Coupon</strong>.</li>
                                    <li>Anh có thể bấm vào <strong>Chi tiết</strong> để thiết lập cho phép hoặc không cho phép coupon được áp dụng gộp với các chương trình khuyến mãi khác.</li>
                                </ol>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="tao-mot-dot-phat-hanh-coupon-moi" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">2. Tạo một đợt phát hành Coupon mới</h4>
                                <p><strong>Tình huống:</strong> Cửa hàng Hùng Cường chuẩn bị chạy chương trình "Tri ân khách hàng". Anh Hùng muốn tạo 100 mã coupon, mỗi mã giảm 200.000 VNĐ cho các hóa đơn mua TV có giá trị từ 10.000.000 VNĐ trở lên.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ol class="list-decimal list-inside space-y-2 mt-2">
                                    <li>Anh Hùng vào <strong>Thiết lập -> Quản lý coupon</strong>.</li>
                                    <li>Nhấn nút <strong>+ Thêm đợt phát hành mới</strong>.</li>
                                    <li>Tại tab <strong>Thông tin</strong>, anh nhập các thông tin cần thiết:
                                        <ul class="list-disc list-inside ml-4 mt-2">
                                            <li><strong>Tên đợt phát hành:</strong> "Tri ân khách hàng tháng 12".</li>
                                            <li><strong>Giá trị coupon:</strong> 200.000.</li>
                                            <li><strong>Thời gian hiệu lực:</strong> Chọn ngày bắt đầu và kết thúc chương trình.</li>
                                            <li><strong>Hàng/nhóm hàng mua:</strong> Chọn nhóm hàng "Tivi".</li>
                                            <li><strong>Tổng tiền hàng:</strong> Nhập 10.000.000.</li>
                                        </ul>
                                    </li>
                                    <li>Sau khi <strong>Lưu</strong>, anh chuyển sang tab <strong>Danh sách coupon</strong>, chọn <strong>+ Danh sách coupon</strong>, nhập số lượng là 100 và hệ thống sẽ tự động tạo 100 mã coupon.</li>
                                    <li>Cuối cùng, anh chọn các coupon vừa tạo và nhấn <strong>Thao tác -> Phát hành coupon</strong> để kích hoạt chúng.</li>
                                </ol>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="ap-dung-coupon-cho-khach-hang-khi-thanh-toan" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">3. Áp dụng Coupon cho khách hàng khi thanh toán</h4>
                                <p><strong>Tình huống:</strong> Một khách hàng đến cửa hàng Hùng Cường mua tivi và cung cấp một mã coupon đã nhận được từ chương trình "Tri ân khách hàng" để được giảm giá.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ol class="list-decimal list-inside space-y-2 mt-2">
                                    <li>Tại màn hình bán hàng, nhân viên tạo hóa đơn như bình thường.</li>
                                    <li>Trước khi thanh toán, nhân viên nhấn vào mục <strong>Giảm giá</strong>.</li>
                                    <li>Nhập mã coupon của khách hàng vào ô <strong>Coupon</strong> và nhấn Enter.</li>
                                    <li>Nếu mã hợp lệ và hóa đơn đủ điều kiện, hệ thống sẽ tự động trừ 200.000 VNĐ vào tổng tiền cần thanh toán.</li>
                                    <li>Nhân viên nhấn <strong>Thanh toán (F9)</strong> để hoàn tất giao dịch.</li>
                                </ol>
                            </div>
                        </section>
                        <section id="cac-tinh-nang-chuyen-sau" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">III. Các tính năng chuyên sâu</h3>
                            <p>Đây là các nghiệp vụ quản lý nâng cao, giúp bạn kiểm soát chặt chẽ và tối ưu hóa việc sử dụng tính năng Coupon.</p>
                            <div class="toc-item mt-6">
                                <h4 id="quan-ly-va-theo-doi-cac-dot-phat-hanh" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">1. Quản lý và theo dõi các đợt phát hành</h4>
                                <p><strong>Tình huống:</strong> Anh Hùng muốn kiểm tra xem trong đợt phát hành "Tri ân khách hàng tháng 12" đã có bao nhiêu coupon được sử dụng và xem chi tiết các giao dịch đó.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ol class="list-decimal list-inside space-y-2 mt-2">
                                    <li>Anh Hùng vào <strong>Thiết lập -> Quản lý coupon</strong>.</li>
                                    <li>Anh nhấp vào đợt phát hành "Tri ân khách hàng tháng 12".</li>
                                    <li>Tại đây, anh có thể:
                                        <ul class="list-disc list-inside ml-4 mt-2">
                                            <li><strong>Tab Thông tin:</strong> Xem lại các điều kiện áp dụng của đợt phát hành.</li>
                                            <li><strong>Tab Danh sách coupon:</strong> Lọc xem các coupon theo trạng thái (Đã phát hành, Đã sử dụng,...) để biết mã nào đã được dùng.</li>
                                            <li><strong>Tab Lịch sử sử dụng:</strong> Xem danh sách tất cả các hóa đơn đã áp dụng coupon của đợt này, bao gồm mã phiếu, thời gian và giá trị giảm giá.</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="phan-quyen-su-dung-tinh-nang-coupon-cho-nhan-vien" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">2. Phân quyền sử dụng tính năng Coupon cho nhân viên</h4>
                                <p><strong>Tình huống:</strong> Anh Hùng muốn chỉ cấp quyền cho quản lý cửa hàng được phép tạo và xóa đợt phát hành coupon, trong khi nhân viên bán hàng chỉ có thể xem thông tin.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ol class="list-decimal list-inside space-y-2 mt-2">
                                    <li>Anh Hùng vào <strong>Thiết lập -> Phân quyền người dùng</strong> và chọn vai trò của nhân viên cần thiết lập.</li>
                                    <li>Tìm đến mục <strong>Quản lý Coupon</strong> trong nhóm quyền <strong>Thiết lập</strong>.</li>
                                    <li>Anh có thể tùy chỉnh các quyền chi tiết:
                                        <ul class="list-disc list-inside ml-4 mt-2">
                                            <li><strong>Xem danh sách:</strong> Cho phép/không cho phép nhân viên xem danh sách các đợt phát hành.</li>
                                            <li><strong>Thêm mới:</strong> Cho phép/không cho phép tạo mới đợt phát hành.</li>
                                            <li><strong>Cập nhật:</strong> Cho phép/không cho phép chỉnh sửa thông tin.</li>
                                            <li><strong>Xóa:</strong> Cho phép/không cho phép xóa đợt phát hành.</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                            <div class="toc-item mt-6">
                                <h4 id="xu-ly-cac-nghiep-vu-dac-biet-tra-hang-doi-tra" class="text-lg font-bold text-gray-800 mb-3 scroll-mt-24">3. Xử lý các nghiệp vụ đặc biệt (Trả hàng, Đổi trả)</h4>
                                <p><strong>Tình huống:</strong> Một khách hàng đã mua tivi và sử dụng coupon giảm giá 200.000 VNĐ, nay muốn trả lại sản phẩm. Anh Hùng cần biết hệ thống sẽ xử lý việc hoàn tiền như thế nào.</p>
                                <p class="mt-4"><strong>Giải pháp của KiotViet:</strong></p>
                                <ul class="list-disc list-inside space-y-2 mt-2">
                                    <li>Khi tạo phiếu trả hàng từ hóa đơn gốc, giá trị giảm giá trên phiếu trả sẽ bao gồm cả giá trị của coupon đã áp dụng. Điều này đảm bảo khách hàng được hoàn lại đúng số tiền họ đã thực trả.</li>
                                    <li><strong>Lưu ý quan trọng:</strong> Mã coupon đã sử dụng trong hóa đơn gốc sẽ không được hoàn lại hay tái sử dụng, kể cả khi hóa đơn đó bị hủy hoặc khách trả toàn bộ hàng.</li>
                                </ul>
                            </div>
                        </section>
                        <section id="thong-tin-lien-he-ho-tro" class="scroll-mt-24">
                            <h3 class="text-xl font-bold text-gray-900 mt-10 mb-4">Thông tin liên hệ hỗ trợ</h3>
                            <p>Nếu có bất kỳ thắc mắc nào trong quá trình sử dụng, đội ngũ KiotViet luôn sẵn sàng hỗ trợ bạn:</p>
                            <ul class="list-disc list-inside mt-2">
                                <li><strong>Tổng đài tư vấn bán hàng:</strong> 1800 6162</li>
                                <li><strong>Tổng đài hỗ trợ phần mềm:</strong> 1900 6522</li>
                                <li><strong>Email:</strong> hotro@kiotviet.com</li>
                            </ul>
                        </section>
                    </article>
                </main>
                <aside class="hidden lg:block lg:col-span-3">
                    <nav id="toc-nav" class="sticky top-24">
                        <h3 class="font-semibold text-gray-900 mb-3">Trong bài viết này</h3>
                        <div class="space-y-1">
                            <div><a href="#gioi-thieu-chung" class="toc-link toc-parent-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">I.&nbsp;Giới thiệu chung</a></div>
                            <div><a href="#cac-thao-tac-pho-bien" class="toc-link toc-parent-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">II.&nbsp;Các thao tác phổ biến</a>
                                <div class="pl-4 mt-1 space-y-1 toc-submenu">
                                    <a href="#kich-hoat-tinh-nang-coupon" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">1.&nbsp;Kích hoạt tính năng Coupon</a>
                                    <a href="#tao-mot-dot-phat-hanh-coupon-moi" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">2.&nbsp;Tạo một đợt phát hành Coupon mới</a>
                                    <a href="#ap-dung-coupon-cho-khach-hang-khi-thanh-toan" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">3.&nbsp;Áp dụng Coupon cho khách hàng khi thanh toán</a>
                                </div>
                            </div>
                            <div><a href="#cac-tinh-nang-chuyen-sau" class="toc-link toc-parent-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">III.&nbsp;Các tính năng chuyên sâu</a>
                                <div class="pl-4 mt-1 space-y-1 toc-submenu">
                                    <a href="#quan-ly-va-theo-doi-cac-dot-phat-hanh" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">1.&nbsp;Quản lý và theo dõi các đợt phát hành</a>
                                    <a href="#phan-quyen-su-dung-tinh-nang-coupon-cho-nhan-vien" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">2.&nbsp;Phân quyền sử dụng tính năng Coupon cho nhân viên</a>
                                    <a href="#xu-ly-cac-nghiep-vu-dac-biet-tra-hang-doi-tra" class="toc-link block border-l-4 border-transparent pl-4 py-1 text-sm text-gray-600 hover:text-blue-600 hover:border-gray-300">3.&nbsp;Xử lý các nghiệp vụ đặc biệt (Trả hàng, Đổi trả)</a>
                                </div>
                            </div>
                        </div>
                    </nav>
                </aside>
            </div>
        </div>
        <footer class="bg-white border-t border-gray-200 mt-12">
            <div class="max-w-screen-2xl mx-auto py-6 px-4 sm:px-6 lg:px-8"><p class="text-center text-sm text-gray-500">&copy; 2025 KiotViet. All rights reserved.</p></div>
        </footer>
    </div>
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
    <button id="scrollToTopBtn" class="hidden fixed bottom-5 right-5 z-50 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-opacity duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>
    </button>
    <script>
        // SCRIPT CONTENT (STATIC)
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const closeSidebarButton = document.getElementById('close-sidebar-button');
            const openSidebar = () => { sidebar.classList.remove('-translate-x-full'); overlay.classList.remove('hidden'); };
            const closeSidebar = () => { sidebar.classList.add('-translate-x-full'); overlay.classList.add('hidden'); };
            if (mobileMenuButton) mobileMenuButton.addEventListener('click', openSidebar);
            if(closeSidebarButton) closeSidebarButton.addEventListener('click', closeSidebar);
            if(overlay) overlay.addEventListener('click', closeSidebar);
            document.querySelectorAll('#sidebar .main-nav-toggle').forEach(button => {
                button.addEventListener('click', (e) => {
                    const submenu = button.nextElementSibling;
                    if (submenu && submenu.classList.contains('submenu')) {
                        submenu.classList.toggle('open');
                        const arrow = button.querySelector('.arrow-icon');
                        if (arrow) { arrow.classList.toggle('open'); }
                    }
                });
            });
            const activeLink = document.querySelector('#sidebar .active');
            if (activeLink) {
                let parent = activeLink.closest('.submenu');
                while(parent) {
                    parent.classList.add('open');
                    const prevButton = parent.previousElementSibling;
                    if (prevButton && prevButton.classList.contains('main-nav-toggle')) {
                        const arrow = prevButton.querySelector('.arrow-icon');
                        if (arrow) { arrow.classList.add('open'); }
                    }
                    parent = parent.parentElement.closest('.submenu');
                }
            }
            const sections = document.querySelectorAll('main section, main .toc-item');
            const navLinks = document.querySelectorAll('#toc-nav a.toc-link');
            const headerOffset = 120;
            const activateLink = (id) => {
                let activeParent = null;
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                        const parentTocItem = link.closest('.toc-submenu');
                        if(parentTocItem){ activeParent = parentTocItem.previousElementSibling; }
                    }
                });
                if (activeParent && activeParent.classList.contains('toc-parent-link')) { activeParent.classList.add('active'); }
            };
            const onScroll = () => {
                if (window.innerWidth < 1024) return;
                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - headerOffset;
                    if (window.pageYOffset >= sectionTop) { currentSectionId = section.id || section.querySelector('h4')?.id; }
                });
                if (currentSectionId) { activateLink(currentSectionId); } 
                else if (window.scrollY === 0 && navLinks.length > 0) {
                    navLinks.forEach(link => link.classList.remove('active'));
                    const firstLink = document.querySelector('#toc-nav a.toc-parent-link');
                    if (firstLink) firstLink.classList.add('active');
                }
            };
            window.addEventListener('scroll', onScroll, { passive: true });
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - (headerOffset - 20);
                        window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                    }
                });
            });
            onScroll();
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            if (scrollToTopBtn) {
                window.addEventListener('scroll', () => { if (window.scrollY > 300) { scrollToTopBtn.classList.remove('hidden'); } else { scrollToTopBtn.classList.add('hidden'); } });
                scrollToTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
            }
        });
    </script></body></html>
